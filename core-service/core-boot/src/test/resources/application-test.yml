# Test environment configuration
spring:
  # Disable Nacos configuration import
  cloud:
    nacos:
      config:
        import-check:
          enabled: false
        enabled: false
      discovery:
        enabled: false
    openfeign:
      enabled: false
  config:
    import: "optional:nacos:"
  # Use embedded test Redis or mock
  data:
    redis:
      enabled: false
  # Disable web features for unit tests
  main:
    web-application-type: none
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration
      - org.springframework.cloud.openfeign.FeignAutoConfiguration
      
cache:
  local:
    enabled: true
    maximum-size: 1000
    expire-after-write: 5m
    expire-after-access: 2m
    refresh-after-write: 3m
    record-stats: true
  
  redis:
    enabled: true
    key-prefix: "test:cache:"
    default-ttl: 5m
    enable-keyspace-notifications: false  # 测试环境关闭通知
  
  sync:
    enabled: false  # 测试环境关闭同步

# 日志配置
logging:
  level:
    org.nan.cloud.core.cache: DEBUG
    org.springframework.cache: DEBUG
    root: WARN